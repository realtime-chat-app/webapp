<nb-icon
  icon="message-circle-outline"
  nbButton
  (click)="openNewChat()"
></nb-icon>

<ng-template #modalContent>
  <nb-list>
    <nb-list-item
      *ngFor="let user of users$ | async"
      nbButton
      (click)="startChat(user)"
    >
      <ng-container
        *ngTemplateOutlet="avatar; context: { user: user }"
      ></ng-container>
    </nb-list-item>
  </nb-list>
</ng-template>

<ng-template #avatar let-user="user">
  <nb-user
    style="flex: 1"
    [name]="user.name"
    [picture]="user.avatar || 'assets/img/noimage.png'"
  ></nb-user>
</ng-template>
